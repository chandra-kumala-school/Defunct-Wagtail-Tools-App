{% extends "base.html" %}

{% load static i18n wagtailcore_tags wagtailimages_tags %}

{% block body_class %}template-index{% endblock %}

{% block extra_css %}

{% endblock extra_css %}

{% block content %}

<section>
    {% for block in page.body %}
        <article>
            {% if block.block_type == 'heading' %}
                <h2 class="text-center">{{ block.value }}</h2>
            {% elif block.block_type == 'paragraph' %}
                {{ block.value }}
            {% elif block.block_type == 'image' %}
                {% image block.value width-400 class="img-fluid" alt="Responsive image" %}
            {% elif block.block_type == 'embed' %}
                <div class="youtube mx-auto">{{ block.value }}</div>
            {% endif %}
        </article>
    {% endfor %}
</section>
        
<section>
    {% if items %}
        <section class="card-columns">
            {% for post in items %}
                {% with post=post.specific %}}
                        <div class="card mb-3">
                            {% with post.main_image as main_image %}
                                {% if main_image %}{% image main_image fill-300x150 class="card-img-top" %}{% endif %}
                            {% endwith %}
                            <div class="card-body">
                                {% if post.title %}<h5 class="card-title"><a href="{% pageurl post %}">{{ post.title }}</a></h5>{% endif %}
                                {% if post.intro %}<p class="card-text">{{ post.intro | richtext }}</p>{% endif %}
                                {% if post.date %}<p class="card-text"><small class="text-muted">{{ post.date}}</small></p>{% endif %}
                            </div>
                        </div>
                {% endwith %}
            {% endfor %}
        </section>
    {% else %}
        <div class="col-md-12">
            <p>Sorry no entries yet, please check back later.</p>
        </div>
    {% endif %}
</section>
<section>
    {% for block in page.end %}
        <article>
            {% if block.block_type == 'heading' %}
                <h2 class="text-center">{{ block.value }}</h2>
            {% elif block.block_type == 'paragraph' %}
                {{ block.value }}
            {% elif block.block_type == 'image' %}
                {% image block.value width-400 class="img-fluid" alt="Responsive image" %}
            {% elif block.block_type == 'embed' %}
                <div class="youtube mx-auto">{{ block.value }}</div>
            {% endif %}
        </article>
    {% endfor %}
</section>

{% endblock content %}